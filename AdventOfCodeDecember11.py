# AdventOfCode 11.12.2023

# Explanation: The researcher has collected a bunch of data and 
# compiled the data into a single giant image (your puzzle input). 
# The image includes empty space (.) and galaxies (#).

example1 = """...#......
.......#..
#.........
..........
......#...
.#........
.........#
..........
.......#..
#...#....."""

example2 = """................................................#.........#............................................#....................................
..#.............#......#.............................................#...........................................................#..........
..............................................................#..............................#..............................................
.................................................................................................................#..........................
...........#...........................#...............................................#..................................#.............#...
............................#..................#.....#..........................#...........................................................
..................................#................................#........................................................................
...........................................................................#................................................................
.....#...................................#......................................................#.......................#...........#.....#.
.....................#........#....................#....................................................#...................................
......................................................................#.....................................................................
...........................................................#.................................#..............................................
........#..................#....................#....................................................#......................................
#.............#....................................................#..............#.............................#...........................
...................#.............#...................................................................................#...............#......
.............................................................................#.............................................................#
.........................................................................................................#..................................
....#...........................................................................................#...........................#.....#.........
.....................#.......................#.........#....................................................................................
#............#.........................................................................#....................#...............................
................................#..................#...........#......#............................#...................#.......#............
.......................................................................................................................................#....
...................................................................................#........................................................
.........................#.............#...................................................................................#................
............................................................................................................................................
..........#..............................................................#......#.........#..........#......................................
............................................................................................................................................
.................................................................................................#............................#.............
................#...............................#............#.....................#........................................................
.#........................#..........................#......................................................#.......................#.......
.......#....................................#................................#..............................................................
.................................#.....................................#..................................................................#.
........................................................#.............................#...............................#........#............
.....................#...................#.....#...............#............................................................................
.............#...................................................................................................#..........................
................................................................................................#.....#...............................#.....
.................#................#................#........................................................................................
.#..........................#.............................#.......#.......#................................................................#
.............................................#.............................................................#................................
...........#.................................................................................#...............................#..............
.....................#.................................#.......#..................................................................#.....#...
.......#..............................#..............................................................#......................................
#...............................#.....................................#...............#........................#.......#....................
...........................................................................#.....#.........................................................#
...........................................................................................#................................................
........................................................#................................................#.......................#..........
.........#............#............................................#.................................................#.....#................
............................................................................................................................................
......................................#......#........................................................#.........#...........................
.............#.....#......#..........................#......................................................................................
......#................................................................................................................................#....
.............................................................................................................#..............................
..#.......#.............................#.....................#..................#........#.................................................
............................................................................................................................................
......................................................................................#...............................#.....................
..................#...........................#...........................#.........................#.........................#.............
............................................................................................................................................
......................................#..................................................#.........................................#........
.......................#.....#................................................................#.............#............#..................
.....#.............................................#.............#..........................................................................
.............#...........................................................#.......#..................................#...........#...........
.................................#..........................................................................................................
.............................................#...........#..................................................................................
.......#......................................................#............................#.........#........#.............................
.....................#................................................#...........................................................#.........
...............#...................#...............#.......................................................................#................
#..........................#......................................................................#.........................................
.............................................................................#..............................................................
...............................#......#.................#..............................................#..........#.........................
...........................................................................................................................................#
.................#......#.......................#....................................#.....#..............................#.................
.........#.............................................................#..................................#.................................
....................................................#............#............#.........................................................#...
..#.........................................................#........................................................#..........#...........
............................................................................................................................................
............................................................................................................................................
.......#...........................#..............................................................#.........................................
....................#...................................#................................................................#..................
..............................#.............................................................................................................
..#......................#.............................................#........#..........#................................................
..........#.............................#......................#................................................................#...........
.....................................................................................................#......................................
......................#.............................................................................................#......................#
#................#..................................#........................................#.................#............................
...................................#......#.......................#...........#..........................................#.............#....
............................................................................................................................................
..........#..............................................#..................................................................................
............................................................................................................................................
....................#......#..........#.......................#......#....................#..........#.......#..................#...........
...#.........................................................................#..............................................................
..................................................................................#..............#..........................................
........#.......................#..........#................................................................................................
..............#...........................................................................................#.................................
................................................................#.......................................................................#...
.......................#................#.....................................................................#.............................
....#............#............#.................................................................#.....#.....................................
...................................................................................................................#........................
...........................................#..............................................................................#.................
.......#.........................................#.......#.......#.....#...............................................................#....
................................................................................#...........#.....................................#.........
...........#.....................................................................................#..........................................
..............................................................#.............................................................................
...............#.........#..........#........................................................................#..............................
...........................................#......................................................................#......#..................
....#...............#.......................................................................................................................
......................................................................................#..............................................#......
...............................................#...............#..............#.................#...........................................
.#.........................................................................................#.........................#......................
................#......#................#................................#..........................#...........#...........................
......#......................#.....................#.......#................................................................................
.............................................#...........................................................#...............#.....#........#...
...........#.........................................................................#......................................................
............................................................................#...............................................................
.........................................................................................#............................#.....................
...................#...................#.....................#....................................#.............#...........................
.................................#..........................................................................................................
.......#......#...........#..................................................................................................#.....#........
.......................................................................#..............#........#.............#..............................
......................#..................#......#..............#..............#.....................................#..................#....
..........................................................................................#.............#...................................
.........#..........................................#..............#.......................................................#................
.............................#..............................................................................................................
.............................................#...................................#..........................................................
................#..................#........................................#......................................#........................
....#.................#.................#.............................................#.................................#..................#
............................................................#.........#..................................#..................................
......................................................#...................................#.................................................
.................................#..................................................................#.......................................
.................................................#...................................................................................#......
............................................................................................................................................
..................#.............................................#.............#.........................#................#..................
.........#.................................................#...........#.............#........#..............#............................#.
...................................#.........................................................................................#..............
............................................................................................................................................
#.....................#...................................................#.......#...............................#.........................
..............................#.................#........#..........................................................................#.......
..............#........................................................................#....................................................
...........................................#.............................................................#..............................#...
.................................#...................................................................................#...........#..........
...........#.......#.......#...........................#.....#................#......................#........#............................."""

# Task one: 
# The researcher is trying to figure out the sum of the lengths of the shortest path 
# between every pair of galaxies. However, there's a catch: the universe expanded in 
# the time it took the light from those galaxies to reach the observatory. Due to something 
# involving gravitational effects, only some space expands. In fact, the result is that any 
# rows or columns that contain no galaxies should all actually be twice as big.

def calculateDistance(x,y,emptyRow,emptyCol):
    i1, j1 = x
    i2, j2 = y

    i1, i2 = min(i1, i2), max(i1, i2)
    j1, j2 = min(j1, j2), max(j1, j2)

    distance = 0
    for i in range(i1, i2):
        distance += 1
        if emptyRow[i]:
            distance += 1
    for j in range(j1, j2):
        distance += 1
        if emptyCol[j]:
            distance += 1

    return distance

def findDistanceBetweenGalaxies(string):
    lines = string.split("\n")
    galaxies = []
    for i in range(len(lines)):
        for j in range(len(lines[0])):
            if lines[i][j] == "#":
                galaxies.append((i,j))
    amount = len(galaxies)
    # Mark all lines that are empty to count up if we have to go trough these because they count double the normal amount of one
    emptyRow = [all([lines[i][j] == "." for j in range(len(lines[0]))]) for i in range(len(lines))]
    emptyCol = [all([lines[i][j] == "." for i in range(len(lines))]) for j in range(len(lines[0]))]

    sum = 0
    for i in range(amount):
        for j in range(i+1, amount):
            sum += calculateDistance(galaxies[i], galaxies[j], emptyRow, emptyCol)
    return sum

# Task two: 
# he galaxies are much older (and thus much farther apart) than the researcher initially estimated.
# Now, instead of the expansion you did before, make each empty row or column one million times larger. 
# That is, each empty row should be replaced with 1000000 empty rows, and each empty column should be 
# replaced with 1000000 empty columns.

def calculateDistance2(x,y,emptyRow,emptyCol):
    i1, j1 = x
    i2, j2 = y

    i1, i2 = min(i1, i2), max(i1, i2)
    j1, j2 = min(j1, j2), max(j1, j2)

    distance = 0
    for i in range(i1, i2):
        distance += 1
        if emptyRow[i]:
            distance += (10**6)-1
    for j in range(j1, j2):
        distance += 1
        if emptyCol[j]:
            distance += (10**6)-1

    return distance

def findDistanceBetweenBiggerGalaxies(string):
    lines = string.split("\n")
    galaxies = []
    for i in range(len(lines)):
        for j in range(len(lines[0])):
            if lines[i][j] == "#":
                galaxies.append((i,j))
    amount = len(galaxies)
    # Mark all lines that are empty to count up if we have to go trough these because they count double the normal amount of one
    emptyRow = [all([lines[i][j] == "." for j in range(len(lines[0]))]) for i in range(len(lines))]
    emptyCol = [all([lines[i][j] == "." for i in range(len(lines))]) for j in range(len(lines[0]))]

    sum = 0
    for i in range(amount):
        for j in range(i+1, amount):
            sum += calculateDistance2(galaxies[i], galaxies[j], emptyRow, emptyCol)
    return sum
    
if __name__ == "__main__":
    print("Return with function findDistanceBetweenGalaxies:")
    print("Example 1:")
    print(findDistanceBetweenGalaxies(example1))
    print("Example 2:")
    print(findDistanceBetweenGalaxies(example2))
    print("Return with function findDistanceBetweenBiggerGalaxies:")
    print("Example 1:")
    print(findDistanceBetweenBiggerGalaxies(example1))
    print("Example 2:")
    print(findDistanceBetweenBiggerGalaxies(example2))